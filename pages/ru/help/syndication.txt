====== Новостные ленты XML ======
«[[:tulpawiki|TulpaWiki]]» предоставляет некоторые свои данные  для  новостных лент XML с помощью файла [[this>feed.php]]. На новостную ленту можно подписаться в [[wp>Aggregator|агрегаторе]].

Функциональность XML-рассылки((XML Syndication)) реализована в замечательном классе [[http://www.bitfolge.de/rsscreator-en.html|Feed Creator]], написанном Каем Блэнкенхорном (Kai Blankenhorn).

===== Опции, заданные в конфигурации или переданные в URL =====
То, каким образом происходит рассылка, настраивается с помощью определённых опций. При вызове ''feed.php'' без аргументов, он использует эти опции для работы. Значения всех опций могут быть переписаны параметрами, переданными в URL.

==== Ссылки ====
Каждый элемент в созданной ленте имеет ссылку; эта опция определяет, куда эта ссылка указывает.

  * Параметр URL: linkto
  * По умолчанию: diff
  * Возможные значения:

^ Значение   ^ Ссылка ^
| page    | Версия статьи на момент создания рассылки. |
| current | Наиболее свежая версия статьи. |
| rev     | Страница со списком версий статьи. |
| diff    | [[diff]]-вид изменений статей. |

==== Содержание новостной ленты ====
Этой опцией определяется, что показывается в теле элемента новостной ленты.

  * Параметр URL: content
  * По умолчанию: abstract
  * Возможные значения:

^ Значение   ^ Содержимое элемента ^
| abstract | Первый параграф статьи |
| diff     | diff-вид изменений статьи в виде простого текста. |
| htmldiff | diff-вид изменений статьи в виде таблице в формате HTML. |
| html     | Всё содержание статьи в виде HTML. |

==== Формат новостной ленты ====
«TulpaWiki» может создавать XML-рассылки в нескольких форматах.

  * Параметр URL: type
  * По умолчанию: rss1
  * Возможные значения:

^ Значение   ^ Формат рассылки ^
| rss    | RSS 0.91 |
| rss1   | RSS 1.0  |
| rss2   | RSS 2.0  |
| atom   | ATOM 0.3 |
| atom1  | ATOM 1.0 |

==== Режим списков ====
feed.php может быть использован для экспорта списка последних изменений (по умолчанию), но на ряду с этим может использоваться и для других списков.

  * Параметр URL: mode
  * По умолчанию: recent
  * Возможные значения:

^ Значение   ^ Режим списка ^
| recent  | Список наиболее свежих статей, самые свежие сверху. |
| list    | Простой список всех статей в пространстве имён (какого имени --- см. ниже) |
| search  | Список статей, соответствующих запросу поиска, заданного в дополнительном параметре ''q'' |

==== Фильтр пространств имён ====
Лента новостей может быть ограничена статьями только конкретного пространства имён.

  * Параметр URL: ns
  * По умолчанию: *
  * Возможные значения: любое допустимое пространство имён

В [[#Режим списков|режиме списков]] ''list'' лента будет содержать статьи только из данного пространства имён, но не из его подпространств.

В [[#Режим списков|режиме списков]] ''recent'' подпространства включаются.

Ограничение пространства имён напрямую не поддерживается для [[#Режим списков|режима списков]] ''search''. Вместо этого вы можете ограничить пространство имён в запросе, используя символ «@», однако при этом будут включены подпространства.

==== Ограничение числа элементов ====
Здесь может быть определено число статей в рассылке новостей.

  * Параметр URL: num
  * По умолчанию: 20
  * Возможные значения: целое число

==== Включение малых правок ====
По умолчанию малые правок (minor edits) будут отражаться в рассылке. Это может быть изменено в параметре URL.

  * Опция конфигурации: none
  * Параметр URL: minor
  * По умолчанию: 0
  * Возможные значения: 0 или 1

==== Кэширование ====
Рассылки XML кэшируются для уменьшения нагрузки на вики. Эта опция контролирует, насколько долго кэши новостей считаются валидными.

  * Параметр URL: нет
  * По умолчанию: 5*60
  * Возможные значения: время в секундах

==== Сводки изменений ====
[[summary|Сводка]] изменений статьи обычно включается в заголовок элемента новостной ленты. Это может быть нежелательно и может быть отключено.

  * Параметр URL: нет
  * По умолчанию: 1
  * Возможные значения: 0 или 1

===== Примеры =====
  * [[this>feed.php?type=rss2&num=5]] возвращает  RSS-2.0-рассылку 5-ти наиболее свежих изменений;
  * [[this>feed.php?mode=list&type=atom&linkto=page&ns=ru]] перечисляет все статьи в пространстве имён «ru» в формате ATOM-0.3-рассылки, в которой каждый элемент связан непосредственно со статьёй.

===== Новостные ленты и списки доступа =====
Когда включены [[acl|списки доступа]] (ACL), статьи с ограниченным доступом по чтению **не** будут включены в публичные ленты новостей.

Если вы хотите получить доступ к рассылкам ограниченных статей, вам нужно передать ваши имя пользователя и пароль в URL, как показано здесь: 
  ''http://tulpawiki.ru/feed.php?u=username&p=password''

:!: Это не очень безопасно и может привести к утечке ваших персональных данных. 
Но в тоже время, это может работать, когда «TulpaWiki» работает поверх ''mod_php'', который передаёт логин/пароль через схему аутентификации «HTTP Basic Auth», и некоторые агрегаторы поддерживают её.

===== См. также =====

  * [[rss|Агрегация рассылок RSS/ATOM]] для добавления внешних лент в ваши статьи «TulpaWiki».